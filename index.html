<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰‹åŠ¨ ISO ä¸Šä¼ è™šæ‹Ÿæœº</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            min-height: 100vh;
            color: white;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #ffffff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        .upload-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 2rem;
            text-align: center;
        }

        .upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 3rem;
            margin: 2rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: rgba(255, 255, 255, 0.6);
            background: rgba(255, 255, 255, 0.05);
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .btn {
            display: inline-block;
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 1rem 2rem;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: none;
            cursor: pointer;
            margin: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }

        .btn-warning {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .btn-success {
            background: linear-gradient(45deg, #27ae60, #229954);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
        }

        .specifications {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .specifications h2 {
            margin-bottom: 1rem;
            color: #ffffff;
            text-align: center;
        }

        .supported-formats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .format-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .format-item h4 {
            color: #3498db;
            margin-bottom: 0.5rem;
        }

        .warning {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid rgba(231, 76, 60, 0.3);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .info {
            background: rgba(52, 152, 219, 0.2);
            border: 1px solid rgba(52, 152, 219, 0.3);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .file-info {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid rgba(46, 204, 113, 0.3);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            display: none;
        }

        footer {
            text-align: center;
            margin-top: 3rem;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“ æ‰‹åŠ¨ ISO ä¸Šä¼ è™šæ‹Ÿæœº</h1>
            <p class="subtitle">ä¸Šä¼ æ‚¨è‡ªå·±çš„ ISO æ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿è¡ŒçœŸå®çš„è™šæ‹Ÿæœº</p>
        </header>

        <div class="warning">
            <h3>âš ï¸ é‡è¦è¯´æ˜</h3>
            <p>â€¢ è¯·ç¡®ä¿ä¸Šä¼ çš„ ISO æ–‡ä»¶æ˜¯å¯å¯åŠ¨çš„ç³»ç»Ÿé•œåƒ</p>
            <p>â€¢ æ”¯æŒ Linuxã€Windowsã€FreeDOS ç­‰å¤šç§ç³»ç»Ÿ</p>
            <p>â€¢ æ–‡ä»¶å¤§å°é™åˆ¶ï¼šå»ºè®®ä¸è¶…è¿‡ 500MB ä»¥è·å¾—æœ€ä½³æ€§èƒ½</p>
        </div>

        <div class="info">
            <h3>ğŸ’¡ ä½¿ç”¨æç¤º</h3>
            <p>â€¢ æ¨èä½¿ç”¨ Chromeã€Firefox æˆ– Edge æµè§ˆå™¨</p>
            <p>â€¢ é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´åŠ è½½</p>
            <p>â€¢ å¯ä»¥éšæ—¶åœæ­¢å’Œé‡å¯è™šæ‹Ÿæœº</p>
        </div>

        <div class="upload-section">
            <h2>ğŸ“¤ ä¸Šä¼  ISO æ–‡ä»¶</h2>
            
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">ğŸ“</div>
                <h3>ç‚¹å‡»æˆ–æ‹–æ‹½ ISO æ–‡ä»¶åˆ°æ­¤å¤„</h3>
                <p>æ”¯æŒ .iso æ ¼å¼çš„ç³»ç»Ÿé•œåƒæ–‡ä»¶</p>
                <input type="file" id="isoFile" accept=".iso" style="display: none;">
                <button class="btn" onclick="document.getElementById('isoFile').click()">é€‰æ‹© ISO æ–‡ä»¶</button>
            </div>

            <div class="file-info" id="fileInfo">
                <h3>ğŸ“„ æ–‡ä»¶ä¿¡æ¯</h3>
                <p><strong>æ–‡ä»¶å:</strong> <span id="fileName">-</span></p>
                <p><strong>æ–‡ä»¶å¤§å°:</strong> <span id="fileSize">-</span></p>
                <p><strong>æ–‡ä»¶ç±»å‹:</strong> <span id="fileType">ISO é•œåƒ</span></p>
                <button class="btn btn-success" onclick="launchVM()">ğŸš€ å¯åŠ¨è™šæ‹Ÿæœº</button>
            </div>
        </div>

        <div class="specifications">
            <h2>ğŸ“‹ æ”¯æŒçš„ç³»ç»Ÿæ ¼å¼</h2>
            <div class="supported-formats">
                <div class="format-item">
                    <h4>ğŸ§ Linux</h4>
                    <p>Ubuntu, Debian, CentOS, Fedora ç­‰</p>
                </div>
                <div class="format-item">
                    <h4>ğŸ Windows</h4>
                    <p>Windows 95/98/ME, Windows XP ç­‰</p>
                </div>
                <div class="format-item">
                    <h4>ğŸ”” å…¶ä»–ç³»ç»Ÿ</h4>
                    <p>FreeDOS, ReactOS, KolibriOS ç­‰</p>
                </div>
                <div class="format-item">
                    <h4>ğŸ’¾ å­˜å‚¨</h4>
                    <p>æœ€å¤§æ”¯æŒ 500MB ISO æ–‡ä»¶</p>
                </div>
            </div>
        </div>

        <div class="specifications">
            <h2>âš¡ è™šæ‹Ÿæœºè§„æ ¼</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                <div>âœ… Intel 486 å…¼å®¹ CPU</div>
                <div>âœ… 128MB å†…å­˜</div>
                <div>âœ… VGA å›¾å½¢æ”¯æŒ</div>
                <div>âœ… å£°éŸ³è¾“å‡º</div>
                <div>âœ… ç½‘ç»œè¿æ¥</div>
                <div>âœ… é¼ æ ‡é”®ç›˜æ”¯æŒ</div>
                <div>âœ… USB è®¾å¤‡æ¨¡æ‹Ÿ</div>
                <div>âœ… ç¡¬ç›˜æ”¯æŒ</div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 2rem;">
            <button class="btn btn-secondary" onclick="showInstructions()">ğŸ“– ä½¿ç”¨è¯´æ˜</button>
            <button class="btn btn-warning" onclick="clearStorage()">ğŸ—‘ï¸ æ¸…é™¤ç¼“å­˜</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 æ‰‹åŠ¨ ISO ä¸Šä¼ è™šæ‹Ÿæœº | åŸºäº v86 æ¨¡æ‹Ÿå™¨å’Œ WebAssembly</p>
    </footer>

    <script>
        let selectedFile = null;

        document.addEventListener('DOMContentLoaded', function() {
            setupDragAndDrop();
            checkStoredFile();
        });

        function setupDragAndDrop() {
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('isoFile');

            uploadArea.addEventListener('click', () => fileInput.click());
            
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = '#3498db';
                uploadArea.style.backgroundColor = 'rgba(52, 152, 219, 0.1)';
            });

            uploadArea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                uploadArea.style.backgroundColor = 'transparent';
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'rgba(255, 255, 255, 0.3)';
                uploadArea.style.backgroundColor = 'transparent';
                
                if (e.dataTransfer.files.length) {
                    handleFileSelect(e.dataTransfer.files[0]);
                }
            });

            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    handleFileSelect(e.target.files[0]);
                }
            });
        }

        function handleFileSelect(file) {
            if (!file.name.toLowerCase().endsWith('.iso')) {
                alert('è¯·é€‰æ‹© ISO æ ¼å¼çš„æ–‡ä»¶ï¼');
                return;
            }

            if (file.size > 500 * 1024 * 1024) { // 500MB é™åˆ¶
                alert('æ–‡ä»¶å¤§å°è¶…è¿‡ 500MB é™åˆ¶ï¼Œè¯·é€‰æ‹©è¾ƒå°çš„æ–‡ä»¶ï¼');
                return;
            }

            selectedFile = file;
            displayFileInfo(file);
        }

        function displayFileInfo(file) {
            document.getElementById('fileName').textContent = file.name;
            document.getElementById('fileSize').textContent = formatFileSize(file.size);
            document.getElementById('fileInfo').style.display = 'block';
            
            // ä¿å­˜æ–‡ä»¶åˆ° localStorage
            saveFileToStorage(file);
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function saveFileToStorage(file) {
            // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šä¿å­˜æ–‡ä»¶å¼•ç”¨æˆ–æ–‡ä»¶ä¿¡æ¯
            localStorage.setItem('vm_iso_name', file.name);
            localStorage.setItem('vm_iso_size', file.size.toString());
            localStorage.setItem('vm_iso_last_upload', new Date().toISOString());
        }

        function checkStoredFile() {
            const storedName = localStorage.getItem('vm_iso_name');
            const storedSize = localStorage.getItem('vm_iso_size');
            
            if (storedName && storedSize) {
                document.getElementById('fileName').textContent = storedName;
                document.getElementById('fileSize').textContent = formatFileSize(parseInt(storedSize));
                document.getElementById('fileInfo').style.display = 'block';
            }
        }

        function launchVM() {
            if (!selectedFile && !localStorage.getItem('vm_iso_name')) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ª ISO æ–‡ä»¶ï¼');
                return;
            }
            
            window.location.href = '/vm/';
        }

        function showInstructions() {
            alert(`ä½¿ç”¨è¯´æ˜ï¼š
1. ç‚¹å‡»"é€‰æ‹© ISO æ–‡ä»¶"æˆ–æ‹–æ‹½ ISO æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸ
2. ç¡®è®¤æ–‡ä»¶ä¿¡æ¯æ— è¯¯åç‚¹å‡»"å¯åŠ¨è™šæ‹Ÿæœº"
3. ç­‰å¾…è™šæ‹ŸæœºåŠ è½½å®Œæˆï¼ˆé¦–æ¬¡å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼‰
4. åœ¨è™šæ‹Ÿæœºçª—å£ä¸­ä½¿ç”¨é¼ æ ‡å’Œé”®ç›˜æ“ä½œ
5. å¯ä»¥éšæ—¶åœæ­¢ã€é‡å¯æˆ–å…¨å±è™šæ‹Ÿæœº

æ”¯æŒçš„ç³»ç»Ÿï¼š
â€¢ Linux å‘è¡Œç‰ˆï¼ˆUbuntu, Debian, CentOS ç­‰ï¼‰
â€¢ Windows ç³»ç»Ÿï¼ˆ95/98/ME/XPï¼‰
â€¢ FreeDOS, ReactOS ç­‰å…¼å®¹ç³»ç»Ÿ

æ³¨æ„äº‹é¡¹ï¼š
â€¢ æ¨èä½¿ç”¨ç°ä»£æµè§ˆå™¨è·å¾—æœ€ä½³ä½“éªŒ
â€¢ å¤æ‚ç³»ç»Ÿå¯èƒ½è¿è¡Œè¾ƒæ…¢
â€¢ æŸäº›ç³»ç»Ÿå¯èƒ½éœ€è¦ç½‘ç»œè¿æ¥`);
        }

        function clearStorage() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰ç¼“å­˜æ•°æ®å—ï¼Ÿ')) {
                localStorage.removeItem('vm_iso_name');
                localStorage.removeItem('vm_iso_size');
                localStorage.removeItem('vm_iso_last_upload');
                document.getElementById('fileInfo').style.display = 'none';
                selectedFile = null;
                alert('ç¼“å­˜å·²æ¸…é™¤ï¼');
            }
        }
    </script>
</body>
</html>
